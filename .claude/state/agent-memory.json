{
  "description": "Memória compartilhada entre agentes - Estado do sistema",
  "lastUpdate": "2025-01-22",
  "systemState": {
    "architecture": "Domain-Driven Design (DDD)",
    "environment": "PRODUCTION",
    "criticalIssues": [
      "Redirecionamento prematuro no Payment Brick",
      "PIX não mostra QR Code",
      "Sistema aceita pagamentos falsos"
    ],
    "utilities": {
      "logger": {
        "hasLGPDMasking": true,
        "functions": ["logInfo", "logError", "logWarning"]
      },
      "ids": {
        "functions": [
          "generateUniqueUrl",
          "generateCorrelationId",
          "generatePaymentId",
          "generateProfileId"
        ]
      }
    }
  },
  "avoidPatterns": [
    "Não usar validateHMACSignature de validation.ts (código morto)",
    "Usar MercadoPagoService.validateWebhook",
    "Não criar backups (.bak, .backup, .old)",
    "Não usar process.env diretamente",
    "Não usar any em TypeScript",
    "Não redirecionar no onSubmit do Payment Brick"
  ],
  "dataModel": {
    "profile": {
      "removed": ["cpf"],
      "critical": ["bloodType", "allergies", "medications", "emergencyContacts"],
      "noSaveBeforeApproval": true
    },
    "payment": {
      "plans": {
        "basic": 5,
        "premium": 85
      },
      "requiresDeviceId": true,
      "requiresHMACValidation": true
    }
  }
}
